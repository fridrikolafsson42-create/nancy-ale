<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>Nancy Ale — Level 1</title>
<style>
:root{--bg:#0f1226;--fg:#e8e8f0;--accent:#ffd400;--ui:#1f244a;--ui2:#2b3170;}
*{box-sizing:border-box;margin:0;padding:0;}
html,body{height:100%;font-family:system-ui,Segoe UI,Roboto,Inter,Arial;background:var(--bg);color:var(--fg);}
.wrap{display:grid;place-items:center;height:100%;}
.frame{width:100%;max-width:960px;background:linear-gradient(180deg,#0f1226 0%,#0a0d1b 100%);border:1px solid #2a2f5c;border-radius:18px;overflow:hidden;position:relative;}
header{display:flex;justify-content:space-between;align-items:center;padding:12px;background:linear-gradient(90deg,var(--ui),var(--ui2));}
header h1{font-size:16px;}
header .btn{padding:8px 12px;border-radius:10px;background:#20265a;color:#fff;border:1px solid #4a5199;cursor:pointer;}
#screen{position:relative;width:100%;aspect-ratio:16/9;background:radial-gradient(120% 140% at 50% 10%, #2a2f5c 0%, #171a36 60%, #0c0f24 100%);}
#canvas{position:absolute;inset:0;width:100%;height:100%;}
.hud{position:absolute;left:12px;top:12px;display:flex;gap:12px;align-items:center;background:rgba(0,0,0,.25);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:8px 12px;}
.tag{font-weight:700;opacity:.9;}
.value{font-variant-numeric:tabular-nums;}
.overlay{position:absolute;inset:0;display:grid;place-items:center;background:rgba(17,20,45,.85);backdrop-filter:blur(2px);}
.card{background:rgba(255,255,255,.02);padding:24px;border-radius:18px;text-align:center;}
[hidden]{display:none!important;}
</style>
</head>
<body>
<div class="wrap">
<div class="frame">
<header>
<h1>Nancy Ale — Level 1</h1>
<button id="btnStart" class="btn">Start</button>
</header>
<div id="screen">
<canvas id="canvas"></canvas>
<div class="hud" id="hud" hidden><span class="tag">Score:</span> <span class="value" id="score">0000</span></div>
<div class="overlay" id="overlay">
<div class="card">
<h2>¡Bienvenid@ a Nancy Ale!</h2>
<p>Mueve a Nancy con ← → o A D. Dispara con Espacio o toca arriba en móvil.</p>
<button id="btnPlay" class="btn">Start</button>
</div>
</div>
</div>
</div>
</div>
<script>
function svgDataURI(svg){return 'data:image/svg+xml;utf8,'+encodeURIComponent(svg.replace(/\n/g,'').trim());}
const nancySVG = svgDataURI(`<svg xmlns='http://www.w3.org/2000/svg' width='96' height='96'><circle cx='48' cy='48' r='24' fill='#ffd9c2'/></svg>`);
const ballSVG = svgDataURI(`<svg xmlns='http://www.w3.org/2000/svg' width='32' height='32'><circle cx='16' cy='16' r='10' fill='#ffd400'/></svg>`);
const bgSVG = svgDataURI(`<svg xmlns='http://www.w3.org/2000/svg' width='512' height='288'><rect width='512' height='288' fill='#0f1226'/></svg>`);

const canvas=document.getElementById('canvas');
const ctx=canvas.getContext('2d');
let W=0,H=0;
function resize(){const r=document.getElementById('screen').getBoundingClientRect();W=r.width;H=r.height;canvas.width=W;canvas.height=H;}
window.addEventListener('resize',resize);resize();

const keys={left:false,right:false,shoot:false};
window.addEventListener('keydown',e=>{if(['ArrowLeft','a','A'].includes(e.key)) keys.left=true;if(['ArrowRight','d','D'].includes(e.key)) keys.right=true;if(e.code==='Space'){keys.shoot=true;e.preventDefault();}});
window.addEventListener('keyup',e=>{if(['ArrowLeft','a','A'].includes(e.key)) keys.left=false;if(['ArrowRight','d','D'].includes(e.key)) keys.right=false;});

const state={running:false,score:0,player:{x:100,y:0,w:64,h:64,speed:300},shots:[],tim:0,bgOffset:0};
function startGame(){state.running=true;state.score=0;state.shots=[];state.player.x=W/2-32;document.getElementById('overlay').hidden=true;document.getElementById('hud').hidden=false;loop(0);}
document.getElementById('btnPlay').addEventListener('click',startGame);
document.getElementById('btnStart').addEventListener('click',startGame);

// Touch controls
const screen=document.getElementById('screen');
screen.addEventListener('touchstart',e=>{const t=e.changedTouches[0];const x=t.clientX-screen.getBoundingClientRect().left;const third=W/3;if(x<third){keys.left=true;keys.right=false;}else if(x>2*third){keys.right=true;keys.left=false;}else{keys.left=false;keys.right=false;keys.shoot=true;}});
screen.addEventListener('touchend',()=>{keys.left=false;keys.right=false;keys.shoot=false;});

function shoot(){state.shots.push({x:state.player.x+32,y:state.player.y+24});}
function update(dt){if(keys.left) state.player.x-=state.player.speed*dt;if(keys.right) state.player.x+=state.player.speed*dt;state.player.x=Math.max(0,Math.min(W-64,state.player.x));if(keys.shoot){keys.shoot=false;shoot();}state.shots.forEach(s=>{s.y-=300*dt;});state.shots=state.shots.filter(s=>s.y>0);state.tim+=dt*1000;}
function draw(){ctx.clearRect(0,0,W,H);ctx.fillStyle='#0f1226';ctx.fillRect(0,0,W,H);ctx.fillStyle='yellow';state.shots.forEach(s=>ctx.beginPath(),ctx.arc(s.x,s.y,10,0,2*Math.PI),ctx.fill());ctx.fillStyle='pink';ctx.beginPath();ctx.arc(state.player.x+32,H-64,32,0,2*Math.PI);ctx.fill();document.getElementById('score').textContent=String(state.score).padStart(4,'0');}
let last=0;
function loop(ts){if(!state.running)return;const dt=(ts-last)/1000;last=ts;update(dt);draw();requestAnimationFrame(loop);}
</script>
</body>
</html>
